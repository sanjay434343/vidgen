<!DOCTYPE html>
<html>
<body>

<textarea id="text">HELLO WORLD</textarea><br>
<input type="color" id="textColor" value="#ff0000"><br>
<input type="color" id="cardColor" value="#ffffff"><br>
<input id="musicUrl" placeholder="https://example.com/music.mp3"><br>
<button onclick="run()">Generate</button>

<pre id="log"></pre>

<script>
async function run() {
  const res = await fetch("/api/generate-card", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({
      text: text.value,
      textColor: textColor.value,
      cardColor: cardColor.value,
      musicUrl: musicUrl.value
    })
  });

  const raw = await res.text();

  try {
    const json = JSON.parse(raw);
    log.textContent = "SUCCESS:\n" + JSON.stringify(json, null, 2);
  } catch {
    log.textContent = "NOT JSON:\n" + raw;
  }
}
</script>

</body>
</html>
